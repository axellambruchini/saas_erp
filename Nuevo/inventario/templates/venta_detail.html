{% extends "base.html" %}

{% block content %}

<h2 class="text-xl font-semibold mt-6 mb-4">Etiquetas de Lotes</h2>

<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 print-only">
  {% for lote in lotes_consumidos %}
  <div class="border rounded-2xl shadow p-4 text-center bg-white flex flex-col items-center">
    <p class="mb-1"><strong>C√≥digo:</strong> {{ lote.codigo }}</p>
    <p class="mb-1"><strong>Producto:</strong> {{ lote.producto }}</p>
    <p class="mb-1"><strong>Cantidad:</strong> {{ lote.cantidad }}</p>
    <p class="mb-2"><strong>Vence:</strong> {{ lote.vence|date:"d-m-Y" }}</p>

    <!-- QR -->
    <img src="data:image/png;base64,{{ lote.qr }}" alt="QR {{ lote.codigo }}" class="mx-auto my-2 w-24 h-24 object-contain"/>

    <!-- C√≥digo de barras -->
    <img src="data:image/png;base64,{{ lote.barcode }}" alt="Barcode {{ lote.codigo }}" class="mx-auto my-2 w-full max-w-xs object-contain"/>
  </div>
  {% empty %}
  <p class="text-gray-500 col-span-full">No hay lotes para imprimir.</p>
  {% endfor %}
</div>

<div class="mt-6 flex justify-center">
  <button onclick="window.print()" class="px-4 py-2 rounded-xl bg-blue-500 text-white hover:bg-blue-600 transition-colors">
    üñ®Ô∏è Imprimir etiquetas
  </button>
</div>

<!-- Estilos de impresi√≥n -->
<style>
@media print {
  body * { visibility: hidden; }
  .print-only, .print-only * { visibility: visible; }
  .print-only { position: absolute; top: 0; left: 0; width: 100%; }
}
</style>

{% endblock %}
